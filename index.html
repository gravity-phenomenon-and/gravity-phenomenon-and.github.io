<!DOCTYPE html>
<html>	
	<head>
		<title>Gravity phenomenon</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
		<script type="text/javascript" src="Libraries/three/build/three.js"></script>
        <script type="text/javascript" src="Libraries/three/examples/js/controls/OrbitControls.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.7.7/dat.gui.min.js"></script>
        
		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
		<style>
		  body{
		/* set margin to 0 and overflow to hidden, 
		to use the complete page */
		      margin: 0;
		      overflow: hidden;
		  }
          #gui { 
              position: absolute; 
              top: 2px; 
              left: 2px; 
            }
            @media only screen and (max-width: 768px) {
                #gui{
                    width: 100%;
                }
            }
		</style>
	</head>
	<body>
        
		<!--Div which will hold the Output -->
        
        <div id="WebGL-output">
        </div>
        
		<!--Javascript code that runs our Three.js examples -->
		<script type="text/javascript">
            
            const HEIGHT=window.innerHeight
            const WIDTH=window.innerWidth
            
            var g=0.001
            var STOP_TIME=-1
            time=0
		    var scene = new THREE.Scene();
            //window.addEventListener("wheel", onMouseWheel);
            
            
            
            
            //setting camera
            var camera = new THREE.PerspectiveCamera(100, WIDTH / HEIGHT, 0.1, 100000);
            camera.position.z = 350;
            

            var material =new THREE.MeshPhongMaterial({shininess:10, color: 0xffffff})
            
            
            var gui = new dat.gui.GUI();
            gui.domElement.id = 'gui';
            
            var objs=[]/*
                 new Objects([0,0,0], [0,0,0], [100000, 30], "1", "star"),
                 new Objects([100,0,0], [0,1,0], [100, 7], "2", "planet"),
                 new Objects([-100,0,0], [0,0.65,0.4], [100, 10], "3", "planet")    
                     ]   */
            
            //0;0;0;0;0;0;100000;30;#ffffff;Star;star---0;100;0;1;0;0;100;10;#418c00;Planet;planet---
            var objs_copy=[]
            
            var start_button;
            
            var setting={
                start:false,
                G:0.001,
                light_general:"#ff0000",
                general_light:new THREE.AmbientLight(0x418c00),
                ok: function(){
                    g=this.G
                    this.general_light.color=new THREE.Color(this.light_general); // soft white light
                },
                starter:function(){
                    if(this.start){
                        start_button.name("Start")
                    }else{
                        time+=1
                        start_button.name("Stop")
                        gui.close()
                        
                    }
                    this.start=!this.start
                },
                reloader:function(){
                    objs=objs_copy
                }
            }
            
            start_button=gui.add(setting, 'starter').name("Start")
            //gui.add(setting, 'reloader').name("Reload")
            
            scene.add(setting.general_light);
            
            
            class Objects{
                constructor(coord, velocity,  params, name, objType){
                    
                    this.coord=coord
                    this.coord_=coord
                    this.velocity=velocity
                    this.velocity_=velocity
                    this.accel=[0,0,0];
                    this.params=params
                    this.name=name
                    
                    
                    this.objType=objType
                    if(objType=="planet"){
                        this.generatePlanet()
                    }
                    if(objType=="star"){
                        this.generateStar()
                    }
                    
                        
                }
                generatePlanet(){
                    var geometry = new THREE.SphereGeometry( this.params[1], 32, 32 );
                    this.obj = new THREE.Mesh( geometry, new THREE.MeshLambertMaterial({shininess:1200, color: new THREE.Color(this.params[2])})); 
                    scene.add( this.obj ); 
                }
                generateStar(){
                    var geometry = new THREE.SphereGeometry( this.params[1], 32, 32 );
                    this.obj = new THREE.Mesh( geometry, new THREE.MeshLambertMaterial({emissive:new THREE.Color(this.params[2])})); 
                    scene.add(this.obj);   
                }
            }
            
            
            var settings=gui.addFolder('Settings')
            settings.addColor(setting, 'light_general')
            settings.add(setting, 'G')
            settings.add(setting, 'ok')
            
            
            
            var conv=gui.addFolder("Convert")
            
            
            var adding=gui.addFolder("Add")
            
            convInfo={
                str:"280?-497.78903966437315;100.86513645244754;-96.56976658789924;1.537391682503825;-0.2946932918138027;0.34356709952915254;500;4;#234dff;0;star---453.0415511434338;100.21497483295633;-103.26493493687461;-1.3976386487040537;-0.2767922340505091;0.3695461815034855;500;4;#234dff;1;star----509.6714983239274;-1581.2393413771233;-1846.7265293991509;1.5795225229363885;4.903628835061161;6.615242372052923;500;2;#faf9ff;2;star----731.4323093632744;-1517.3883672616405;-1264.9736111425864;2.264454588341804;4.704317771985044;4.531455708851745;500;2;#faf9ff;3;star----893.8412504838233;-1344.90709173481;-2191.034151500925;2.769518344132041;4.172372994717382;7.8496314600639625;500;2;#faf9ff;4;star----940.8564943553149;-1157.5388960022653;236.84581907106758;2.915581840204892;3.5849085625794315;-0.8473991515679874;500;2;#faf9ff;5;star----1050.2673420913077;-1270.1110203623562;4160.74431510207;3.260089331300748;3.942576324489821;-14.910440943969698;500;2;#faf9ff;6;star----1125.6812592510178;-1096.4945972044873;-341.90430328747533;3.486620271079011;3.397236625232041;1.2242950414588347;500;2;#faf9ff;7;star----1152.9625901364527;-899.1207625245385;1476.965931461492;3.5718986983741465;2.786083761968277;-5.2886648542229535;500;2;#faf9ff;8;star----1053.3795847806987;-765.7557731705132;625.6822444135934;3.2598601623921484;2.3717155587429946;-2.2407481055074756;500;2;#faf9ff;9;star----1190.941416251965;-1202.631019371933;-3950.070533791526;3.697049383435018;3.7304402973145043;14.156527394900579;500;2;#faf9ff;10;star----1272.6604308875778;-1041.644512581034;-4298.937732681443;3.948777665119435;3.2374906763071154;15.404092007830144;500;2;#faf9ff;11;star----1311.915684874914;-812.4328355040585;-429.2646986000383;4.061841384071833;2.5205990957937106;1.536608277416279;500;2;#faf9ff;12;star----1306.5615953347383;-560.1348684826462;-1960.0330404657172;4.050398036882077;1.7366469260955293;7.020782644812484;500;2;#faf9ff;13;star----1243.522286940488;-362.7240239313252;2208.6366512007708;3.8551641586792664;1.1249208069310805;-7.910910432701149;500;2;#faf9ff;14;star----1268.444189128069;-198.55717829357644;-1655.9476057345878;3.929626407295915;0.6118621348066224;5.9329429843592205;500;2;#faf9ff;15;star----1191.1011780687031;-7.208362272060864;-1783.1200543750474;3.694469568826907;0.02723881274017534;6.384758717172165;500;2;#faf9ff;16;star----1189.3560549065357;213.92019702458583;388.5510525054207;3.6726268537836755;-0.667681489942882;-1.3914481285879567;500;2;#faf9ff;17;star----1269.1724622568972;420.14535081867206;-1235.9089534942761;3.9329222935685677;-1.3059211974683314;4.423653528029705;500;2;#faf9ff;18;star----1295.9383819401085;631.2163263056271;-969.4820013909907;4.014943577272126;-1.9557435905783525;3.4711145411757407;500;2;#faf9ff;19;star----1410.2173242046624;810.6764272735841;1077.868044661483;4.367981843646823;-2.519856937507804;-3.855958137051596;500;2;#faf9ff;20;star----1442.0897415306758;987.2859770093849;308.0700850411055;4.447787279181993;-3.072091616839908;-1.1090811109659486;500;2;#faf9ff;21;star----1414.941331563949;1189.5421807387145;386.3383433793404;4.375397173319055;-3.6773415028907834;-1.379772203924457;500;2;#faf9ff;22;star----1252.8423193554054;1172.005847380708;46.110382970996156;3.8903823764423104;-3.6392334711635583;-0.17311857129037642;500;2;#faf9ff;23;star----1345.9325780873965;906.713866591251;591.8801529858409;4.172779274677233;-2.8221921119901814;-2.1126749762665646;500;2;#faf9ff;24;star----1318.6738645368214;1032.225485269947;363.018400820638;4.102138336096589;-3.2033596575241057;-1.2988867983420982;500;2;#faf9ff;25;star----1285.24023728221;1332.622286740389;87.58981655471132;3.9843527043852855;-4.118848548395125;-0.31810253691070506;500;2;#faf9ff;26;star----1240.059176186912;1550.0385154680876;359.9749193303941;3.8423117610405537;-4.803687784373589;-1.2905550358791849;500;2;#faf9ff;27;star----1142.6671766008808;1729.8628352393882;846.0803431279516;3.53860554607507;-5.363834269415838;-3.024942684845174;500;2;#faf9ff;28;star----1009.8352582737273;1853.0868347178687;499.48945756235224;3.1320697017476595;-5.7419445011153725;-1.7930089266752247;500;2;#faf9ff;29;star----1018.0622030878026;1722.621055096249;-1237.2999720245177;3.158849585621596;-5.346516082126705;4.430944009261787;500;2;#faf9ff;30;star----1028.6954445764197;1581.9737013149954;619.2931926458974;3.1968656020200266;-4.912810049458129;-2.2169413783132623;500;2;#faf9ff;31;star---970.9972235383676;1555.603772284245;-2498.091696729905;-3.0137773865164323;-4.829046209953328;8.951207971722596;500;2;#faf9ff;32;star---988.4392519121118;1692.3094824210852;714.5091060021969;-3.066655113895027;-5.251167475363515;-2.5609436045600664;500;2;#faf9ff;33;star---983.8933660639568;1841.4198618417736;2206.2892717175446;-3.049300322125212;-5.716042648721896;-7.90649766634455;500;2;#faf9ff;34;star---794.2397578896048;1863.341886901698;2583.176216457182;-2.4676914302542845;-5.786374120347372;-9.254001990575706;500;2;#faf9ff;35;star---809.19550095109;2011.8556073445034;-5172.927309814485;-2.5125902620410647;-6.248057279367142;18.538811619089465;500;2;#faf9ff;36;star---911.1841493848622;1937.2830597697568;4376.860321148285;-2.829685346682294;-6.014359011777538;-15.68558205089098;500;2;#faf9ff;37;star---1124.3319036108905;1743.2954076368048;4906.127628568307;-3.489514452623165;-5.414972254361358;-17.5815799745491;500;2;#faf9ff;38;star---1195.0584520315965;1601.2937232852507;-261.2201031511144;-3.7061557439427517;-4.9681751488704995;0.9352296659055835;500;2;#faf9ff;39;star---1243.3220880037725;1391.8160532377456;1140.3458512634625;-3.8553441682366696;-4.3187667835611965;-4.085639849195438;500;2;#faf9ff;40;star---1258.9092101590043;1203.9821133348637;3514.1168597341953;-3.9161785844606984;-3.733625992638804;-12.589112280504455;500;2;#faf9ff;41;star---1266.4777614486618;1044.1426972525105;-3456.164277947117;-3.934765467493965;-3.248792750363096;12.383453235903481;500;2;#faf9ff;42;star---1272.2114385158686;865.7042954158079;2917.119498959082;-3.950487533319922;-2.6883688636893104;-10.453944226779738;500;2;#faf9ff;43;star---1270.981073121474;656.7897088045654;2057.5470782703205;-3.940135370485873;-2.0391075654766135;-7.370800388384077;500;2;#faf9ff;44;star---1399.6165399029646;841.6453073623462;3434.801944435825;-4.3393588559338685;-2.6197944404891103;-12.306471282337743;500;2;#faf9ff;45;star---1420.9917456465387;1002.9563470905415;-1488.1842899965197;-4.405942028395877;-3.111317915467096;5.331729706868719;500;2;#faf9ff;46;star---1412.957920511408;1146.8551346095735;3391.075144568762;-4.378845116175586;-3.559504968031369;-12.15429129947035;500;2;#faf9ff;47;star---1350.7062587414723;1213.9017684800363;-3423.088705997782;-4.1888270479088785;-3.761230061710346;12.267685431990452;500;2;#faf9ff;48;star---1234.5434981026815;463.5291439949721;-2444.614024921704;-3.827623842545665;-1.4388049882196332;8.757528297471335;500;2;#faf9ff;49;star---1177.6662039083594;267.8745337586512;-414.19148963637844;-3.6374345342215344;-0.824518228899214;1.484408184754764;500;2;#faf9ff;50;star---1134.7921053658897;86.94892772458073;-1568.2682460922922;-3.513459351906319;-0.2696749584416452;5.613882758153997;500;2;#faf9ff;51;star---1197.382847975459;-95.74780211922773;1359.4170439952566;-3.7097356896614477;0.2992875939192533;-4.86930446301714;500;2;#faf9ff;52;star---1239.4303996368335;-269.0929681950271;1697.677870369912;-3.8409544841147922;0.8313733989509651;-6.07828441679081;500;2;#faf9ff;53;star---1226.1679654185114;-434.2007541951544;-964.7680495860395;-3.796224738947418;1.3530992588769626;3.449058444432436;500;2;#faf9ff;54;star---1265.102593212023;-582.6601683501881;-784.1877191622124;-3.9138425089421287;1.8052850741845743;2.8069554078113566;500;2;#faf9ff;55;star---1268.5113382647332;-757.0652605915129;-468.20411180944944;-3.9218480635582003;2.3483072947352412;1.674716231093095;500;2;#faf9ff;56;star---1232.3045353471937;-944.6998452986925;479.58145213423273;-3.8045587441344786;2.9321457835505282;-1.7079225964898084;500;2;#faf9ff;57;star---1148.91043195127;-1088.9568047595808;66.27693441227443;-3.5063558060844726;3.3803220069623965;-0.2206343377020618;500;2;#faf9ff;58;star---1100.8157420955747;-1135.1231639069613;34.60853474948154;-3.418329329041661;3.482192121758406;-0.12503951675137642;500;2;#faf9ff;59;star---1055.4661402961356;-804.0949404410528;226.1460444161116;-3.267170969176576;2.5135728627817646;-0.799580547483623;500;2;#faf9ff;60;star---1079.551409431324;-915.6659391765897;71.15221355112566;-3.3421761630659894;2.856299073383982;-0.2524315835541233;500;2;#faf9ff;61;star---1094.1015185465526;-1017.696163184208;-40.3334340624567;-3.390062730915558;3.161064073810585;0.12631101291735505;500;2;#faf9ff;62;star---1010.2171164709495;-1193.4391329047362;-138.18770370600168;-3.1339211553815707;3.6851089988980057;0.48443798661230486;500;2;#faf9ff;63;star---886.4172485449883;-1177.7965047445725;272.78082667963594;-2.758650916237771;3.676755239733545;-0.9811242937351708;500;2;#faf9ff;64;star---393.99301507245343;-1550.6163963073518;-506.21494230521887;-1.2342954348037027;4.794242895544966;1.8196319631268283;500;2;#faf9ff;65;star---552.7254460285418;-1544.7492588104897;-595.7835732349347;-1.699610679482837;4.776137805024518;2.132937308622346;500;2;#faf9ff;66;star---707.754726445079;-1470.6957868880122;1097.3771296871364;-2.194583697023275;4.55735700641503;-3.927598935407489;500;2;#faf9ff;67;star---612.0863492701553;-416.9561845565201;-99.53390902555259;-1.8776787714760927;1.2816935983787392;0.3583582099776606;500;2;#faf9ff;68;star---895.5049768994636;-1327.0105693771497;-380.578920141992;-2.7739461835927246;4.099047453670266;1.3572413615602734;500;2;#faf9ff;69;star---895.5810290996391;-1233.8489542531113;318.6064544700772;-2.779232759111947;3.7728981195929445;-1.1161840796934739;500;2;#faf9ff;70;star----664.9690311612737;-409.2727289420709;1236.9185511101448;2.0505881030970996;1.2585861339403186;-4.422536211884761;500;2;#faf9ff;71;star----727.5324186417469;-612.5947034858099;-2455.7139427073866;2.256021781231193;1.9014251803380355;8.796466917327741;500;2;#faf9ff;72;star----720.5559679013437;-810.0190329575407;1081.0562653488262;2.2307948795250594;2.5036457834663732;-3.8693151411523905;500;2;#faf9ff;73;star----691.5364930966872;-1018.5978537510488;-867.1927700740886;2.141202953710172;3.1579968541436823;3.104265338751886;500;2;#faf9ff;74;star----634.5994663097553;-1225.2194470525562;-2672.2040969418713;1.969133628920838;3.8036254011948225;9.572397361440057;500;2;#faf9ff;75;star----549.1450060063416;-1382.626292515584;-531.8022998477531;1.7008639375486525;4.285020134091961;1.905665932664166;500;2;#faf9ff;76;star----385.70823001450236;-1702.2149577671385;2418.5855244172885;1.1937890767245471;5.2821689420094;-8.66461426140046;500;2;#faf9ff;77;star----220.8396336606455;-1591.7693932200705;-2522.5432387086785;0.6801330802040871;4.941274928060223;9.03938728213028;500;2;#faf9ff;78;star----168.31282701805134;-1715.6918137695268;-1162.7645350151518;0.5175814352053258;5.317891427813938;4.165262667099661;500;2;#faf9ff;79;star----85.78760157601756;-1806.1667167236567;1444.2130007337971;0.26334394080619195;5.600608366922839;-5.174125968614877;500;2;#faf9ff;80;star----83.63932478753225;-1630.7067805911627;-2738.1115287677976;0.2666889811136953;5.0596986640819015;9.806372349616998;500;2;#faf9ff;81;star---36.53986066444928;-1549.0096802372707;-1611.1678008990789;-0.11357082750410533;4.806731047559896;5.768869949371289;500;2;#faf9ff;82;star---50.284244796698644;-1682.4108508534825;2055.4980800219405;-0.15756609340813404;5.2231046601878015;-7.365107630209428;500;2;#faf9ff;83;star---6.469542305702341;-1851.207286068345;-221.65737222137147;-0.0222788647182375;5.7361763757768145;0.7955881097106056;500;2;#faf9ff;84;star---147.0444518463163;-1758.478298390506;2408.089759787844;-0.4498078484573632;5.454057072938499;-8.624731271374596;500;2;#faf9ff;85;star---310.22972562402197;-1633.6940095887146;-1191.9254524621367;-0.9649733874922554;5.060479111390075;4.265371690859998;500;2;#faf9ff;86;star---412.0390559874516;-1489.5340327598574;-831.4811074731374;-1.2839933075433203;4.619309651219121;2.969592705312427;500;2;#faf9ff;87;star---509.93705856341296;-1343.8685462865917;-643.7477039822065;-1.5825513391815451;4.171206696376008;2.3015832376693037;500;2;#faf9ff;88;star---588.3263795938647;-1179.3652786864702;-402.53670338480157;-1.826989803385064;3.655593777839911;1.440527054400697;500;2;#faf9ff;89;star---648.3278255506507;-989.3900474530418;24.571724029963768;-2.0154809855610765;3.0585789383315163;-0.0880876871657714;500;2;#faf9ff;90;star---672.2960145003223;-800.1052331097759;179.3922656403848;-2.0820148104242846;2.476742422136675;-0.6342144799493926;500;2;#faf9ff;91;star---660.328779075155;-618.3434761729011;-12.725026400590979;-2.035741078443618;1.9087164909389231;0.0464972681401942;500;2;#faf9ff;92;star----748.7006848666023;-333.57829819650027;802.886810321579;2.3035123947385254;1.0286752871307658;-2.8748002055820345;500;2;#faf9ff;93;star----845.0397389172061;-184.81305373208917;-31.5556404767209;2.6087229882006246;0.5683727180817627;0.11028578314037217;500;2;#faf9ff;94;star----910.5526549271024;-63.34486419206956;565.3287976847311;2.8119808872430685;0.19533203812109157;-2.023522571197284;500;2;#faf9ff;95;star----951.5085784325545;115.62008853431657;1307.0114066383608;2.945259017027366;-0.35699574944961704;-4.676196677805718;500;2;#faf9ff;96;star----963.1568112593661;298.33052988594056;404.20860190957745;2.9808327010962286;-0.9269383285365065;-1.4463944006098495;500;2;#faf9ff;97;star----916.1970588202674;488.99271383911724;788.040746896791;2.836596773511606;-1.515224076577508;-2.815964021236144;500;2;#faf9ff;98;star----800.1180002221678;590.5239268470824;-271.3003130218094;2.4806890995536977;-1.8399052539452947;0.9561867938570292;500;2;#faf9ff;99;star----653.1446912661432;545.4920119880363;90.35673854206148;2.0104213065607675;-1.6919158768547928;-0.320050245926835;500;2;#faf9ff;100;star----524.7225981184935;492.0483516795899;69.83780797682614;1.626818537772959;-1.5306719519549423;-0.252991454533372;500;2;#faf9ff;101;star----367.7177837765777;437.41223695151035;81.39389717315815;1.1452325396506302;-1.365566037371281;-0.29447745663045355;500;2;#faf9ff;102;star----274.4866259112643;539.3457731252214;348.1279558841425;0.8514728716119102;-1.6732749598644143;-1.2411888360199146;500;2;#faf9ff;103;star----275.8195902351277;645.0011655427459;614.3220091428063;0.8745069527915134;-1.996057206161057;-2.1913162498256935;500;2;#faf9ff;104;star----155.0278630168018;553.0729112730102;40.967193286811856;0.48786183905774866;-1.7055042411520114;-0.15460258420459078;500;2;#faf9ff;105;star----55.34706398541256;531.8787767978663;295.07531545767426;0.1864450285989509;-1.646822884655326;-1.051792750046871;500;2;#faf9ff;106;star---95.87802230317996;546.5188526703685;-819.9236200377417;-0.32253372808638564;-1.6867484734145937;2.9353501072522117;500;2;#faf9ff;107;star---222.50241061578976;547.267257495773;-879.7585937259961;-0.6887722255894441;-1.6576580742108287;3.1257156236164487;500;2;#faf9ff;108;star---241.32454951350257;501.41847788687596;-824.7708724270974;-0.7341261268070808;-1.581021522819948;2.9662319441385727;500;2;#faf9ff;109;star---342.6169227518838;431.2596715341317;11.611470750941736;-1.0562419235694178;-1.330851985456978;-0.040823764964934756;500;2;#faf9ff;110;star---470.0703601419155;482.73986132553756;-1317.6563651753486;-1.455144788487238;-1.4945392322685436;4.713673645753471;500;2;#faf9ff;111;star---605.8376840858779;546.2486443946395;1798.4713755816106;-1.8824142183059458;-1.6966657540435355;-6.436403369086476;500;2;#faf9ff;112;star---753.7546846191126;573.0551397691313;1306.7675170889545;-2.3462090961715805;-1.776842280940916;-4.683475386414911;500;2;#faf9ff;113;star---833.726861384354;533.7930604087252;1473.952449234234;-2.573124643636409;-1.6676365263416608;-5.269983972754519;500;2;#faf9ff;114;star----566.7915187930689;-122.39656579258121;749.9027819015735;1.7512092586791108;0.3923254979722323;-2.6833852027420555;500;2;#faf9ff;115;star----583.7574020318316;-226.66455208352747;1413.2144160708156;1.806609819681086;0.7094129580858051;-5.051187547856796;500;2;#faf9ff;116;star----523.7201954319245;-330.0248224999193;936.5989819456424;1.6159319317156349;1.020517178797034;-3.3480949302938097;500;2;#faf9ff;117;star----432.4072848559477;-396.5278355919949;-478.692068799092;1.320144139580991;1.215723106318798;1.7109123332385332;500;2;#faf9ff;118;star----393.4870285529268;-339.05079552398314;541.6371824679125;1.207199299408899;1.0513474935598413;-1.9442116060712729;500;2;#faf9ff;119;star----314.57322240296804;-347.39877409542447;783.8136442308829;0.9818897645681998;1.0820747555278212;-2.7986388696832027;500;2;#faf9ff;120;star----239.24931548365427;-406.89246826819635;-566.7742566008276;0.7411208391548069;1.2503628168500516;2.020509058555459;500;2;#faf9ff;121;star----172.54605276883282;-489.0067391014779;646.404345999831;0.5290404402624699;1.5043330890655293;-2.309991501726271;500;2;#faf9ff;122;star----368.9195821851001;-444.80559308786235;1199.6883553821763;1.146259708423348;1.36735255871801;-4.286734941030038;500;2;#faf9ff;123;star----265.77709640541366;-493.07151211157577;-1282.8441124311887;0.8199255303257071;1.5229248331350222;4.588268512447884;500;2;#faf9ff;124;star----80.25824974553227;-511.18991560438474;357.966959505995;0.24268628225275451;1.5711374927759667;-1.2819629859991761;500;2;#faf9ff;125;star---19.081355591158022;-516.1773663223038;768.9945582543914;-0.051563893142485814;1.5931276941033479;-2.7427097038558004;500;2;#faf9ff;126;star---140.65746369120222;-491.9953054413519;-435.2230457028406;-0.4444211126309957;1.5102986713954063;1.5471477606599924;500;2;#faf9ff;127;star---237.10569751002714;-476.2791636141635;364.7484071466021;-0.7369443214432517;1.4603091825016403;-1.290873934958653;500;2;#faf9ff;128;star---330.9324386254327;-423.51714355853295;117.47160723043817;-1.029202158968359;1.278252437943924;-0.39539237707212016;500;2;#faf9ff;129;star---401.875039734067;-379.5098677095133;42.36000626266127;-1.1881215802582985;1.1557173780154575;-0.13243557281132004;500;2;#faf9ff;130;star---209.97458686689333;-398.7661174006641;-48.92313952727224;-0.6926076930533615;1.208015862002564;0.17535973385216735;500;2;#faf9ff;131;star---282.26340109242994;-349.32259658584223;-88.92530868106549;-0.8865519698267252;1.090768423712612;0.2898140919502405;500;2;#faf9ff;132;star---356.1299041513582;-351.96347001706215;-13.213401809217437;-1.0894570567258677;1.1137232412670406;0.04096535002413093;500;2;#faf9ff;133;star---529.7526849546937;-281.8520476514382;-232.05565423493837;-1.630866072263866;0.881183139273472;0.8215782979221493;500;2;#faf9ff;134;star---709.4830541032456;-320.243501974634;-221.76968651198175;-2.1679331202047583;0.9989758056691073;0.788894983680687;500;2;#faf9ff;135;star---806.5997821590486;-186.222615734418;-853.9245222318972;-2.496013566945442;0.5738249707698541;3.053834662417232;500;2;#faf9ff;136;star---866.7213391076004;-61.346343217445224;-1098.632000650709;-2.6821310223361783;0.19387644254041517;3.9262340134689366;500;2;#faf9ff;137;star---903.260842840285;88.97163124519736;-659.6270686775758;-2.7938633903256336;-0.27301824202848207;2.3592135564386076;500;2;#faf9ff;138;star---923.8866618122197;226.4676513313879;-390.19399771041066;-2.859196115517893;-0.692917168054116;1.4004768885278758;500;2;#faf9ff;139;star---905.9028217331067;362.3447624131401;-1102.586888121752;-2.8053751427366374;-1.1165565523212444;3.94588064389974;500;2;#faf9ff;140;star----428.96792526656253;-117.0438090803757;-496.22453826794174;1.2990532503513121;0.37685056254611965;1.764435923268167;500;2;#faf9ff;141;star----337.7191938508143;-149.61691751657213;-434.57599509215686;1.0461601966508345;0.4709948849478009;1.561622674227962;500;2;#faf9ff;142;star----217.98216789706805;-195.60949415320437;-517.318516135163;0.6865235091529833;0.6117033573993709;1.8414821967448465;500;2;#faf9ff;143;star----77.2066690365735;-232.94512206061998;182.75158311986058;0.22878879675177485;0.729674128595034;-0.6499302745601923;500;2;#faf9ff;144;star---57.50294959989723;-233.71187072769126;-221.03087469108112;-0.19284357821577244;0.7337507302736004;0.7816481302657154;500;2;#faf9ff;145;star---200.78311956518735;-206.23587285017481;2.293350955633587;-0.653596040202697;0.6602447872040612;-0.001433394112808595;500;2;#faf9ff;146;star---296.05961917253194;-175.8142469450533;-10.947753699919451;-0.902393822004444;0.5835928448432437;0.03915266929496423;500;2;#faf9ff;147;star---416.6966879195288;-127.21438506302793;248.74872845794187;-1.2790682189357918;0.41422755616606455;-0.8758140036390328;500;2;#faf9ff;148;star---528.0220361020896;-149.06726709874476;-406.94938651753085;-1.6283283028129187;0.47955439913074954;1.444576857257855;500;2;#faf9ff;149;star---905.8300373504825;598.2572113732848;1164.677651170611;-2.793794445736564;-1.851209988130504;-4.17789109416482;500;2;#faf9ff;150;star---901.6293498382653;711.5979704932263;-1791.838261741427;-2.7948272936525225;-2.204045964438865;6.417484873907542;500;2;#faf9ff;151;star---241.9941798341777;695.8597348628723;269.40566166938595;-0.7448726902944995;-2.1450493582002195;-0.9625891948094598;500;2;#faf9ff;152;star---365.87864020796525;737.924424770538;1507.406262139615;-1.1399570532323635;-2.2842880515106123;-5.396452928197297;500;2;#faf9ff;153;star---486.69170971448006;761.3079949126358;-669.3261607490568;-1.5040016218621424;-2.3494064388459845;2.396663007992065;500;2;#faf9ff;154;star---626.0070294828544;773.2928476717891;1293.292580629762;-1.943225534126968;-2.3872443249885937;-4.633509360331739;500;2;#faf9ff;155;star---775.7394840445465;769.1416217139248;-2742.893528493229;-2.4090201861994265;-2.385539798491194;9.826362133838108;500;2;#faf9ff;156;star----365.11336970853574;709.0354057195266;635.19991677541;1.1158811138688576;-2.1756121864470996;-2.2649954802476455;500;2;#faf9ff;157;star----513.4646917809054;760.2321270986771;170.9213405188705;1.5965005143239284;-2.338446217294622;-0.6094325897882158;500;2;#faf9ff;158;star----665.9764009880573;768.8117908512492;-186.55917277685467;2.077206089292809;-2.366595294263391;0.6560864457537446;500;2;#faf9ff;159;star----782.0829100587839;755.6297107730786;-32.14887611049079;2.4243320860123823;-2.323764012826004;0.12210167687928444;500;2;#faf9ff;160;star----904.4903002967823;711.9760180101749;-101.55930502987427;2.78438875789974;-2.188183297573492;0.36314914679925425;500;2;#faf9ff;161;star----952.3835593584578;613.236156855734;-152.11964981225893;2.92598247130027;-1.9182031356256248;0.5382162943929091;500;2;#faf9ff;162;star----850.3312580861156;2001.0307524310567;-529.6389290307549;2.638456764084665;-6.208059511786409;1.8964290981700795;500;2;#faf9ff;163;star----833.2784408627946;1865.5469353839324;738.2266411710042;2.5938809927536384;-5.786514196681684;-2.6422672582395808;500;2;#faf9ff;164;star----685.4502884898914;2172.2522129590034;2318.7731808906155;2.1249611617041477;-6.743687597876313;-8.307863865958472;500;2;#faf9ff;165;star----487.80650563653336;2322.70952160793;-1256.1546416883293;1.512479790870909;-7.206521034806228;4.499288452550787;500;2;#faf9ff;166;star----268.47935744674714;2305.3273223006213;2897.4886250195277;0.8321795840833245;-7.157846222131011;-10.381766624260862;500;2;#faf9ff;167;star----450.9071793332466;2248.517137470488;-636.6204733613763;1.4015457283469044;-6.979051016130615;2.2809657727762658;500;2;#faf9ff;168;star----557.1703998797624;2149.496938685477;1366.4463882561945;1.728635219721393;-6.6721577196883874;-4.894750991077622;500;2;#faf9ff;169;star----130.58661578808199;2234.106611886169;1129.374772152469;0.40368857895251115;-6.935799325719372;-4.046966082655592;500;2;#faf9ff;170;star---9.254841787340382;2109.5743156641915;-2855.9713382138502;-0.031986363692007046;-6.551701437654758;10.232952366583236;500;2;#faf9ff;171;star---174.8441509208519;2045.1050143535724;-2159.0500842560414;-0.544154517012225;-6.351983249595415;7.73822305436543;500;2;#faf9ff;172;star---227.38493827583338;2227.205100232047;1306.480277140431;-0.7050285417344903;-6.912852779359455;-4.680140376823723;500;2;#faf9ff;173;star---441.44281645759924;2173.625070596081;-2569.0838736881337;-1.360297460174668;-6.75837590043379;9.204607498276815;500;2;#faf9ff;174;star---448.7504226932345;2025.3555768243102;1181.4813053685489;-1.3904968129011757;-6.289041437457048;-4.234328265355057;500;2;#faf9ff;175;star---627.5260504369727;2081.684454940917;2097.6911678945658;-1.9472855302039167;-6.460977110837985;-7.516811185798456;500;2;#faf9ff;176;star---362.0133687095152;2296.442043139376;-2544.826368374093;-1.129230002534902;-7.117401459764375;9.121807000800144;500;2;#faf9ff;177;star----325.8165791638053;2472.532363992252;-3504.976634341441;1.0085763284441427;-7.677181069961522;12.56121370529134;500;2;#faf9ff;178;star----139.1458033069436;2568.1088736334113;-4273.794982426223;0.43280382406622553;-7.956781283412927;15.312208483206643;500;2;#faf9ff;179;star----139.12580241973325;2449.477315388856;-4228.994263382422;0.43276410394635273;-7.6168948176586175;15.158422957160019;500;2;#faf9ff;180;star---47.63695817840775;2546.0728186987267;968.1017162509244;-0.14708576954736288;-7.898875064759322;-3.4705470029769603;500;2;#faf9ff;181;star---275.2428779766179;2586.9746130319177;4743.107190080704;-0.8547673784263452;-8.033398160130188;-16.998306425377507;500;2;#faf9ff;182;star---215.68113635054402;2385.952981781873;2620.084149111245;-0.669481865005001;-7.405666757382745;-9.38812969716172;500;2;#faf9ff;183;star---410.18125065092147;-799.0664149644623;-674.9045756919211;-1.2699695163057916;2.473036559348916;2.4109156514472856;500;2;#faf9ff;184;star---281.2502619593459;-848.4708047635576;568.7082588050467;-0.8724474201405121;2.619680284654172;-2.030376708101839;500;2;#faf9ff;185;star---166.51578482628173;-893.1619954259793;-904.5776760361597;-0.521900221773918;2.764025060671463;3.2335404213332675;500;2;#faf9ff;186;star---2.454005516571527;-889.8797658625056;1318.8163075796156;-0.008362484769662708;2.7532929315707437;-4.718822138283062;500;2;#faf9ff;187;star---",
                f:function(){
                    str_time=this.str.split('?')
                    STOP_TIME=parseInt(str_time[0])
                    objects_str=str_time[1].split('---')
                    for(i=0; i<objects_str.length-1; i++){
                        console.log(objects_str[i])
                        var chars=objects_str[i].split(';')
                        objs.push(new Objects(
                        [parseFloat(chars[0]), parseFloat(chars[1]), parseFloat(chars[2])],
                        [parseFloat(chars[3]), parseFloat(chars[4]), parseFloat(chars[5])],
                        [parseFloat(chars[6]), parseFloat(chars[7]),  chars[8]],
                        chars[9],
                        chars[10]
                        ))
                    }
                },
                p:function(){
                    this.str="-1?"
                    for(i=0;i<objs.length; i++){
                        this.str+=objs[i].coord[0]+";"+objs[i].coord[1]+";"+objs[i].coord[2]+";"+
                            (-objs[i].velocity[0])+";"+(-objs[i].velocity[1])+";"+(-objs[i].velocity[2])+";"+
                            objs[i].params[0]+";"+objs[i].params[1]+";"+objs[i].params[2]+";"+objs[i].name+";"+objs[i].objType+"---"
                    }
                }
            }
            convInfo.f()
            var strs=conv.add(convInfo, 'str')
            strs.name("G Code")
            strs.listen()
            conv.add(convInfo, 'f').name("Unparse")
            conv.add(convInfo, 'p').name("Parse")
            
            
            
            function confirm(objects){
                for(i=0; i<objects.length; i++){
                    objects[i].coord_=objects[i].coord
                    objects[i].velocity_=objects[i].velocity
                    objects[i].accel=[0,0,0]
                }
            }
            
    
            
            var renderer = new THREE.WebGLRenderer(); 
            renderer.setSize( WIDTH, HEIGHT ); 
            document.body.appendChild( renderer.domElement );
            

            
            controls = new THREE.OrbitControls( camera, renderer.domElement );
            controls.rotateSpeed = 1.0;
            controls.zoomSpeed = 1.2;
            controls.panSpeed = 0.8;
            controls.noZoom = false;
            controls.noPan = false;
            controls.staticMoving = true;
            controls.dynamicDampingFactor = 0.0;

            
            
            //main loop
            additional_fl=true
            
            dx=0.4
            function render() {
                
	            requestAnimationFrame(render);
                
                if(setting.start || additional_fl){
                    time+=1
                    if(time==STOP_TIME){
                        setting.start=false
                        start_button.name("start")
                    }
                    additional_fl=false
                    objs_copy=objs
                for(i=0; i<objs.length; i++){
                    for(j=0; j<objs.length; j++){
                        if(i!=j){
                            distant_x=objs[i].coord_[0]-objs[j].coord_[0]
                            distant_y=objs[i].coord_[1]-objs[j].coord_[1]
                            distant_z=objs[i].coord_[2]-objs[j].coord_[2]
                            
                            distant=Math.sqrt(distant_x*distant_x+distant_y*distant_y+distant_z*distant_z)
                            
                            if(distant<=dx){
                                objs[i].accel=[0,0,0]
                            }
                            else{
                            objs[i].accel[0]+=-distant_x/(distant*distant*distant)*g*(objs[j].params[0])
                            objs[i].accel[1]+=-distant_y/(distant*distant*distant)*g*(objs[j].params[0])
                            objs[i].accel[2]+=-distant_z/(distant*distant*distant)*g*(objs[j].params[0])
                            }
                            
                        }
                    }
                    for(dim=0; dim<3; dim++){
                        objs[i].velocity[dim]=objs[i].velocity_[dim]+objs[i].accel[dim]
                        objs[i].coord[dim]=objs[i].coord[dim]+(objs[i].velocity[dim]+objs[i].velocity_[dim])/2
                    }
                }
                }
                for(i=0; i<objs.length; i++){
                    objs[i].obj.position.x=objs[i].coord[0]
                    objs[i].obj.position.y=objs[i].coord[1]
                    objs[i].obj.position.z=objs[i].coord[2]
                }
                confirm(objs)
	           renderer.render(scene, camera)
            }
            render()
		</script>
	</body>
</html>